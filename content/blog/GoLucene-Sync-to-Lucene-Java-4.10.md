---
title: 升级至Lucene－4.10.2
date: '2014-12-10'
description:
categories:
- 技术
tags:

---

Lucene 4.10.2版本发布很长时间了，期间我接手了一个性能分析的小项目，用AngularJS在一个Dojo项目中实现简单的预加载功能，当然这是另一个故事了。总之，过去的一个月我基本没什么时间在GoLucene上，曾经信誓旦旦的我很惭愧。后来GitHub和邮箱里收到几个bug报告，让我有机会重新把精力放回来。

从4.9到4.10的变化还是比较多的，比如说小版本的引入，自动机部分重写（确实比以前的好而且简单），加了一个原位排序算法，改进了位运算，把构建数组的部分独立了出来，使用数组的部分仅限于改变指针，改进了同类型数据保存机制。有些变化其实GoLucene是走在前面的，比如说改进了原先的DWPT和IW的关闭机制，不再使用大量锁了，不过还是没有我滴好。另外GoLucene也不得不把原先BytesRef的部分改回Lucene Java原先的实现，毕竟改动指针这个操作是所有持有XXXRef的上下文所共享的，只是用基本的slice会漏掉部分需要同步修改的地方，所以还是改回去了。

接下去我会更新Hamlet这个demo，争取用到4.10新的codec。另外UI的部分可能会考虑AMUI 2.0，或者PureCSS，毕竟这个应用并没有使用很多的widget，有个基本的responsive UI也许就够了。或者增加一些搜过的关键字的统计之类的小功能，同时改进一下资源加载方面的小问题。